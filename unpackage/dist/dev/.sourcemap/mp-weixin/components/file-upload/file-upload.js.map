{"version":3,"sources":["webpack:///E:/wx/WeChat Files/wxid_p5h0puyb8joh22/FileStorage/File/2023-03/campus_recycling/components/file-upload/file-upload.vue?ff3c","webpack:///E:/wx/WeChat Files/wxid_p5h0puyb8joh22/FileStorage/File/2023-03/campus_recycling/components/file-upload/file-upload.vue?c6a2","webpack:///E:/wx/WeChat Files/wxid_p5h0puyb8joh22/FileStorage/File/2023-03/campus_recycling/components/file-upload/file-upload.vue?2dd3","webpack:///E:/wx/WeChat Files/wxid_p5h0puyb8joh22/FileStorage/File/2023-03/campus_recycling/components/file-upload/file-upload.vue?87c3","uni-app:///components/file-upload/file-upload.vue","webpack:///E:/wx/WeChat Files/wxid_p5h0puyb8joh22/FileStorage/File/2023-03/campus_recycling/components/file-upload/file-upload.vue?dddb","webpack:///E:/wx/WeChat Files/wxid_p5h0puyb8joh22/FileStorage/File/2023-03/campus_recycling/components/file-upload/file-upload.vue?db61"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwH;AACxH;AAC+D;AACL;AACa;;;AAGvE;AACyK;AACzK,gBAAgB,+KAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,sFAAM;AACR,EAAE,+FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAynB,CAAgB,+nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6C7oB,8D;AACA;AACA,qBADA;AAEA;AACA,uBADA;AAEA,gBAFA;AAGA;AACA,mBADA;AAEA,oBAFA,EAHA;;AAOA;AACA,kBADA;AAEA,iBAFA,EAPA;;AAWA;AACA,kBADA;AAEA,iBAFA,EAXA,EAFA;;;;AAmBA,MAnBA,kBAmBA;AACA;AACA,6BADA;AAEA,mBAFA;AAGA,cAHA;;AAKA,GAzBA;AA0BA;AACA,aADA,uBACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAPA,EA1BA;;AAmCA;AACA;AACA,qBADA,GACA,IADA;AAEA;AACA,iDADA;;AAGA,sDAHA;;AAKA,iEALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA,uCADA;AAEA,kCAFA;;AAIA;AACA,gDADA;AAEA,kDAFA;AAGA,oCAHA;AAIA;AACA,+DADA;AAEA,gEAFA,EAJA;;AAQA;AACA;AACA;AAFA,yBARA;;AAaA,sCAbA;AAcA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,yBAxBA;;AA0BA;AACA,mBA1CA,IAFA,2JADA;;;;AAiDA;AACA;AACA;AACA;AACA,wBADA;AAEA,4BAFA;;AAIA,KAxDA;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KArEA,EAnCA,E;;;;;;;;;;;;;AC9CA;AAAA;AAAA;AAAA;AAAm5B,CAAgB,w3BAAG,EAAC,C;;;;;;;;;;;ACAv6B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/file-upload/file-upload.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./file-upload.vue?vue&type=template&id=520d372c&\"\nvar renderjs\nimport script from \"./file-upload.vue?vue&type=script&lang=js&\"\nexport * from \"./file-upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./file-upload.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/file-upload/file-upload.vue\"\nexport default component.exports","export * from \"-!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./file-upload.vue?vue&type=template&id=520d372c&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./file-upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./file-upload.vue?vue&type=script&lang=js&\"","<template>\r\n  <view>\r\n    <view class=\"upload-image-view\">\r\n      <!-- 标题已经省略 -->\r\n      <!-- <view class='title'>上传xxxx图片</view> -->\r\n      <template v-if=\"attIdList.length\">\r\n        <block v-for=\"attid in attIdList\" :key=\"attid\">\r\n          <view class=\"image-view\">\r\n            <image\r\n              :src=\"BASEURL + '/att/view/' + attid + '?sign=2'\"\r\n              :data-src=\"BASEURL + '/att/view/' + attid + '?sign=2'\"\r\n              @tap=\"previewImage\"\r\n            ></image>\r\n          </view>\r\n        </block>\r\n      </template>\r\n      <block v-for=\"(image, index) in imageList\" :key=\"index\">\r\n        <view class=\"image-view\">\r\n          <image :src=\"image\" :data-src=\"image\" @tap=\"previewImage\"></image>\r\n          <view\r\n            v-if=\"!viewModel\"\r\n            class=\"del-btn\"\r\n            :data-index=\"index\"\r\n            @tap=\"deleteImage\"\r\n          >\r\n            <view class=\"baicha\"></view>\r\n          </view>\r\n        </view>\r\n      </block>\r\n      <view\r\n        class=\"add-view\"\r\n        v-if=\"imageList.length < imageLength && !viewModel\"\r\n        @tap=\"chooseImage\"\r\n      >\r\n        <!-- 十字架 -->\r\n        <view class=\"cross\">\r\n          <view class=\"transverse-line\"></view>\r\n          <view class=\"vertical-line\"></view>\r\n        </view>\r\n      </view>\r\n      <!-- <view class='info'>不超过{{imageLength}}个。</view> -->\r\n    </view>\r\n  </view>\r\n</template>\r\n<script>\r\nimport { BASEURL } from \"@/common/utils.js\";\r\nexport default {\r\n  name: \"file-upload\",\r\n  props: {\r\n    imageLength: Number,\r\n    type: String,\r\n    viewModel: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    attId: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n\tuploadFileUrl:{\r\n\t\ttype:String,\r\n\t\tdefault: \"\",\r\n\t}\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      BASEURL: BASEURL,\r\n      imageList: [],\r\n      atts: [],\r\n    };\r\n  },\r\n  computed: {\r\n    attIdList() {\r\n      if (this.attId) {\r\n        return this.attId.split(\",\");\r\n      } else {\r\n        return [];\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    chooseImage: async function () {\r\n      var _this = this;\r\n      uni.chooseImage({\r\n        sourceType: [\"camera\", \"album\"],\r\n        // #ifdef MP-WEIXIN\r\n        sizeType: [\"compressed\", \"original\"],\r\n        // #endif\r\n        count: this.imageLength - this.imageList.length,\r\n        success: (res) => {\r\n          this.imageList = this.imageList.concat(res.tempFilePaths);\r\n          let tempFilePaths = res.tempFilePaths;\r\n          console.log(\"uni.chooseImage\", res);\r\n          for (var i = 0; i < tempFilePaths.length; i++) {\r\n            uni.showLoading({\r\n              title: \"图片上传中…\",\r\n              mask: true,\r\n            });\r\n            uni.uploadFile({\r\n              url: _this.uploadFileUrl,\r\n              filePath: tempFilePaths[i],\r\n              name: \"file\",\r\n\t\t\t   header:{\r\n\t\t\t\t \"Content-Type\": \"multipart/form-data\",\r\n\t\t\t\t \"Cookie\":uni.getStorageSync('cookie')\r\n\t\t\t   },\r\n              formData: {\r\n                type: _this.type,\r\n                // fileName:\r\n\t\t\t\t\r\n              },\r\n              method: \"POST\",\r\n              success: function (uploadFileRes) {\r\n                console.log(uploadFileRes);\r\n                var data = JSON.parse(uploadFileRes.data);\r\n                _this.atts.push(data.result);\r\n\r\n                //if (_this.atts.length == tempFilePaths.length) {\r\n\r\n                _this.$emit(\"sendAtts\", _this.atts);\r\n                uni.hideLoading();\r\n                //}\r\n              },\r\n            });\r\n          }\r\n        },\r\n      });\r\n    },\r\n\r\n    //预览图片\r\n    previewImage: function (e) {\r\n      var current = e.target.dataset.src;\r\n      uni.previewImage({\r\n        current: current,\r\n        urls: this.imageList,\r\n      });\r\n    },\r\n    //删除图片\r\n    deleteImage: function (e) {\r\n      var index = e.target.dataset.index;\r\n      var that = this;\r\n      var images = that.imageList;\r\n      images.splice(index, 1);\r\n      that.imageList = images;\r\n      //附件材料Id\r\n      var arrImg = that.atts;\r\n      arrImg.splice(index, 1);\r\n      that.atts = arrImg;\r\n      that.$emit(\"sendAtts\", that.atts);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n@import \"/common/css/upload-imgs.css\";\r\n</style>\r\n","import mod from \"-!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./file-upload.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\前端\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./file-upload.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1680172409737\n      var cssReload = require(\"D:/前端/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}